<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Waterfall.js</title>
</head>
<style>
	* {
		margin: 0;
		padding: 0;
		list-style: none;
	}

	.modal {
		margin-top: 50px;
		margin-left: 200px;
		width: 520px;
		height: 600px;
		border: 1px solid;
		overflow-y: scroll;
		position: relative;
	}

	#load-more {
		text-align: center;
		margin: 30px auto;
	}
</style>

<body>
	<a href="https://codepen.io/iounini/pen/KyYPKe" target="_blank">思路来自这里</a>
	<!-- https://shuliqi.github.io/2020/11/17/%E7%80%91%E5%B8%83%E6%B5%81%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/#JS-%E8%AE%A1%E7%AE%97%E6%96%B9%E5%BC%8F -->
	<div class="modal">
		<ul id="waterfall"></ul>
		<div id="load-more">
			<button>加载更多</button>
		</div>
	</div>
</body>
<script src="../dist/waterfalljs.min.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script type="text/javascript">
	const images = [
		"https://picsum.photos/640/200/?random",
		"https://picsum.photos/360/640/?random",
		"https://picsum.photos/480/720/?random",
		"https://picsum.photos/480/640/?random",
		"https://picsum.photos/360/?random",
		"https://picsum.photos/360/520/?random",
		"https://picsum.photos/520/360/?random",
		"https://picsum.photos/520/360/?random",
		"https://picsum.photos/520/360/?random",
		"https://picsum.photos/720/640/?random"
	]

	function random(min, max) {
		return min + Math.floor(Math.random() * (max - min + 1));
	}

	var num = 0
	createView(images)

	function createView(arr) {
		var viewDom = ""
		var templateDom = (index) => {
			const imgSrc = `${images[index]}=${random(1, 10000)}`
			num++
			const image = ` <li><div><span>${num}</span><img src='${imgSrc}' /></div></li>`
			const noImage = `<li><div style='height: ${random(100, 200)}px'><span>${num} --- 此block 没有图片</span></div></li>`
			return Math.random() > 0.2 ? image : noImage
		}
		for (let i = 0; i < arr.length; i++) {
			viewDom += templateDom(i)
		}
		$("#waterfall").append(viewDom)
	}


	const wf = new Waterfall({
		el: '#waterfall',
		columnWidth: 236,
		gap: 24,
		delay: 800,
		customStyle: `#waterfall li>div {
				border-radius: 8px;
				font-size: 20px;
				overflow: hidden;
				color: rgba(0, 0, 0, 0.6);
				margin-bottom: 20px;
				padding: 6px;
				background: rgb(255, 255, 255);
				box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
				transition: all 0.5s
			}
			#waterfall li>div:hover {
				transform: translateY(-6px);
				box-shadow: 0 30px 50px rgba(0, 0, 0, 0.3);
				transition: all 0.3s
			}
			#waterfall li>div>img {
				width: 100%
			}`
	})
	wf.init()


	// 加载更多
	var ArrLen = 9
	$('#load-more').click(() => {
		createView(new Array(ArrLen).fill('-'))
		wf.loadMore()
	})

</script>

</html>